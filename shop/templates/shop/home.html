{% extends 'shop/base.html' %}

{% load static %}


{% block title %} Home {% endblock %}

{% block content %}
<script type="text/javascript" src="{% static 'shop/product-filter.js' %}"></script>
    <title>Bars-market</title>
    <section class="slideshow ">
        <div class="slideshow-container">
             <div class="mySlides">
                <img src="{% static 'img/sale6.jpg' %}"/>
             </div>
             <div class="mySlides">
                <img src="{% static 'img/sale2.jpg' %}"/>
             </div>
             <div class="mySlides">
                <img src="{% static 'img/sale5.jpg' %}"/>
             </div>
             <div class="mySlides">
                <img src="{% static 'img/sale1.png' %}"/>
             </div>
        </div>
    </section>
        <br>
        <div style="text-align:center">
            <span class="dot"></span>
            <span class="dot"></span>
            <span class="dot"></span>
            <span class="dot"></span>
        </div>
    <div class="py-4">
        <div class="container">
            <div class="row">
                <div class="col-10 mx-auto my-2 text-center">
                    <h1 class="text-capitalize font-weight-bold">Наші продукти</h1>
                </div>
            </div>
        </div>
    </div>
    <div class="row mx-5">
    	<div class="col-lg-12">
            <div class="box-element mx-5">
                <form action="{% url 'search' %}" method=POST>
                    {% csrf_token %}
                    <div class="container">
                        <div class="row align-items-start text-center">
                            <div class="col">
                                <h2 class="card-header">Price</h2>
                                <div class="list-group list-group-flush">
                                    <li class="list-group-item">
                                        <input type="range" value="{{minMaxPrice.price__min}}" max={{minMaxPrice.price__max}}
                                               min={{minMaxPrice.price__min}} id="rangeInput" oninput="maxPrice.value=this.value"/>
                                        <p>{{minMaxPrice.price__min}}--{{minMaxPrice.price__max}}</p>
                                    </li>
                                    <li class="list-group-item">
                                        Max: <input type="number" value="{{minMaxPrice.price__min}}" max={{minMaxPrice.price__max}}
                                        min={{minMaxPrice.price__min}} class="form-control" id="maxPrice" onkeyup="rangeInput.value=this.value" id="maxPrice"/>
                                        <button id="priceFilterBtn" class="btn btn-info btn-sm mt-1">Пошук</button>
                                    </li>
                                </div>
                            </div>
                            <div class="col">
                                <a href="" class="btn btn-secondary text-uppercase font-weight-bold px-3
                                      dropdown-toggle" data-bs-toggle="dropdown" >Сортувати по...</a>
                                <div class="dropdown-menu">
                                    <a class="dropdown-item" href="{% url 'home' %}">Від дешевих до дорогих</a>
                                    <a class="dropdown-item" href="{{category.get_url}}">Від дорогих до дешевих</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <br>
    <div class="container">
        <div class="row">
            {% for product in products %}
                <div class="col-9 mx-auto col-md-6 col-lg-3">
                    <div class="card mb-4">
                        <div class="p-4">
                            <ul class="scale">
                                <a href="{{product.get_url}}">
                                    <img class="card-img-top" src="{{product.image.url}}" alt="{{product.name}}">
                                </a>
                            </ul>
                        </div>
                        <div class="card-footer d-flex-justify-content-between" style="background: transparent;
                                border-color: transparent;">
                            <p class="font-weight-bold mb-0 text-center">
                                {{product.name}}
                            </p>
                        </div>

                        <div class="box-element product">
                            <a href="{{product.get_url}}"><button  class="btn btn-outline-secondary add-btn my-2" >Переглянути товар</button></a>
		                    <a class="btn btn-outline-success" href="{% url 'add_product' product.id %}"><strong>Добавити в кошик</strong></a>
                            <h4 style="display: inline-block; float: right">
                                {{product.price}} ₴
                            </h4>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
{% endblock %}